<div class="grid">
  <div class="col-12">
    <div class="card">
    <h5 style="font-weight: 600">Categories</h5>
     @if (loading()) {
      <div class="flex justify-content-between flex-wrap mb-3">
        <div class="flex flex-row">
            <p-skeleton height="3rem" width="5rem" styleClass="m-2"></p-skeleton>
            <p-skeleton height="3rem" width="5rem" styleClass="m-2"></p-skeleton>
            <p-skeleton height="3rem" width="5rem" styleClass="m-2"></p-skeleton>
        </div>
        <div class="flex flex-column  align-items-end">
          <p-skeleton height="3rem" width="15rem" styleClass="mb-2"></p-skeleton>
          <p-skeleton width="5rem" height="1rem"></p-skeleton>
        </div>
      </div>      
     } @else {
      <p-table
      #categoriesDataTable
      loadingIcon="pi pi-spin pi-spinner"
      [(selection)]="selectedCategories"
      selectionMode="multiple"
      [value]="categoriesData().categories"
      [rows]="pager().totalRows"
      [rowHover]="true"
      [paginator]="true"
      [loading]="loading()"
      dataKey="id"
      styleClass="p-datatable-gridlines"
      responsiveLayout="scroll"
      >
      <ng-template pTemplate="caption">
        <div class="flex justify-content-between flex-column sm:flex-row">
          <div>
            <button
              pButton
              pRipple
              label="New"
              class="mb-2 p-button-primary p-button-raised"
              icon="pi pi-fw pi-plus"
            ></button>
            <!-- <p-overlayPanel #opMember [showCloseIcon]="true">
              <ng-template pTemplate="content">
                <form [formGroup]="userFormGroup" class="formgrid grid">
                  <div class="flex flex-column flex-wrap gap-2">
                    <h4 class="m-2">New Member</h4>
                    <div class="col-12 md: col-6">
                      <div class="flex flex-column gap-2 mb-2">
                        <label class="font-bold">Name</label>
                        <input
                          formControlName="name"
                          class="w-20rem"
                          pInputText
                          type="text"
                          placeholder="Enter a name"
                        />
                      </div>
                      <div class="flex flex-column gap-2 mb-2">
                        <label class="font-bold">Nickname</label>
                        <input
                          formControlName="nickName"
                          class="w-20rem"
                          pInputText
                          type="text"
                          placeholder="Enter a nickname"
                        />
                      </div>
                      <div class="flex flex-column gap-2 mb-2">
                        <label class="font-bold">Birthdate</label>
                        <p-calendar
                          inputId="birthDate"
                          formControlName="birthDate"
                          class="w-20rem"
                          placeholder="Enter birthdate"
                          [showIcon]="true"
                        ></p-calendar>
                      </div>
                      <div class="flex flex-column gap-2 mb-2">
                        <label class="font-bold">Gender</label>
                        <p-dropdown
                          [options]="gendersSelection"
                          formControlName="gender"
                          placeholder="Select gender"
                        >
                          <ng-template let-gender pTemplate="gender">
                            <div class="flex align-items-center">
                              <span>{{ gender.label }}</span>
                            </div>
                          </ng-template>
                        </p-dropdown>
                      </div>
                      <div class="flex flex-column gap-2 mb-2">
                        <label class="font-bold">Email</label>
                        <input
                          formControlName="email"
                          class="w-20rem"
                          pInputText
                          type="text"
                          placeholder="Enter email"
                        />
                      </div>
                      <div class="flex flex-column gap-2 mb-2">
                        <label class="font-bold">Address</label>
                        <input
                          formControlName="address"
                          class="w-20rem"
                          pInputText
                          type="text"
                          placeholder="Enter address"
                        />
                      </div>
                      <div class="flex flex-column gap-2 mb-2">
                        <label class="font-bold">Mobile Number</label>
                        <input
                          formControlName="mobile"
                          class="w-20rem"
                          pInputText
                          type="text"
                          placeholder="Enter mobile number"
                        />
                      </div>
                      <div class="flex flex-column gap-2 mb-2">
                        <label class="font-bold">Invited By</label>
                        <input
                          formControlName="invitedByMemberName"
                          class="w-20rem"
                          pInputText
                          type="text"
                          placeholder="Enter member name"
                        />
                      </div>
                      <div class="flex flex-column gap-2 mb-2">
                        <label class="font-bold">Remarks</label>
                        <input
                          formControlName="remarks"
                          class="w-20rem"
                          pInputText
                          type="text"
                          placeholder="Enter remarks"
                        />
                      </div>
                      <div class="flex flex-column gap-2 m-4">
                        <button
                          pButton
                          pRipple
                          type="button"
                          label="Submit"
                          class="p-button-raised"
                          (click)="createMember()"
                        ></button>
                      </div>
                    </div>
                  </div>
                </form>
              </ng-template>
            </p-overlayPanel> -->
            <button
              pButton
              pRipple
              label="Delete"
              color="danger"
              [disabled]="selectedCategories.length ? false : true"
              class="m-2 p-button-danger p-button-raised"
              icon="pi pi-fw pi-trash"
            ></button>
            <button
              pButton
              label="Clear"
              class="p-button-outlined mb-2"
              icon="pi pi-filter-slash"
            ></button>
          </div>

          <div class="flex flex-column align-items-end">
            <span>Total Categories: {{defaultFilterRows}}</span>
          </div>
        </div>
      </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 1rem">
            <div class="flex justify-content-between align-items-center">
              <p-tableHeaderCheckbox />
            </div>
          </th>
          <th style="width: 1rem">
            <div
              class="flex justify-content-between align-items-center"
            ></div>
          </th>
          <th style="min-width: 6rem">
            <div class="flex justify-content-between align-items-center">
              Name
              <p-columnFilter
                type="text"
                field="name"
                display="menu"
                placeholder="Search by name"
              >
              </p-columnFilter>
            </div>
          </th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-category>
        <tr>
          <td>
            <p-tableCheckbox [value]="category"></p-tableCheckbox>
          </td>
          <td>
            <div
              class="flex justify-content-between align-items-center"
            >
            <p-tag 
            tooltipPosition="bottom" 
            [pTooltip]="tooltipCategoryEdit" 
            class="m-1 cursor-pointer" 
            icon="pi pi-users"
            severity="info">
            <ng-template #tooltipCategoryEdit>
              <div class="flex align-items-center">
                <span>Edit</span>
              </div>                  
            </ng-template>              
            </p-tag>
            </div>
          </td>
          <td>{{ category.name }}</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="12">No event found.</td>
        </tr>
      </ng-template>            
      </p-table>
     }
    </div>  
  </div>
</div>
